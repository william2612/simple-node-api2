"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.default = void 0;

var _lrucache = _interopRequireDefault(require("../../utils/lrucache/lrucache"));

var ImpressionObserver = /*#__PURE__*/function () {
  function ImpressionObserver(size, hasher) {
    this.cache = new _lrucache.default(size);
    this.hasher = hasher;
  }

  var _proto = ImpressionObserver.prototype;

  _proto.testAndSet = function testAndSet(impression) {
    var hash = this.hasher(impression);
    var previous = this.cache.get(hash);
    this.cache.set(hash, impression.time);
    return previous;
  };

  return ImpressionObserver;
}();

var _default = ImpressionObserver;
exports.default = _default;